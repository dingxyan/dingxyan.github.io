---
layout: post
title:  js类型转换
categories: 前端知识积累
tags: js type
---

### 隐式类型转换
#### 1.  + 
1. 如果一个操作数为字符串，那么会转换为字符串；
    1. 1+"a"="1a"
    2. 如果两个操作数都是原始型但都不是字符串，那么做算术加法；
        1. true+true=2
        2. 1+null=1
        3. 1+undefined=NaN
        4. 其中一个操作数为对象，那么对象转为原始型
              1. 1+[]="1"
              2. 1+{}="1[object object]"
              3. 1+new Date()="1Tue Mar 06 2018 17:13:19 GMT+0800 (CST)"
              4. []+{}="[object object]"
              5. {}+[]   解析为{}; +[]; 因此结果为0
2. 一元 + , -, ++, --, 作用于一个操作数
    1. 会将操作数转换为数字类型
3. 位操作符 &, \|, ^, ~, <<, >>, >>>  作用于整数
    1. 位运算符会将NaN, Infinity, -Infinity转换为0
4. !会将操作数转换为布尔类型
5. ==
    1. 数字比较优先
        1. 两个都是对象，如果不是指向同一个对象的引用则不相等
        2. 一个字符串一个数字，转换为数字
        3. 两个字符串，直接比较
        4. 一个是布尔型，那么布尔型先转换为数字，再跟另一个比较
        5. null==undefined
        6. 一个原始型一个对象，则先将对象转化为原始型，再跟另一个比较
    2. 例子
        
            ```
            var a = new String('123a');
            var b = new String('123a');
            a==b;//false 引用的比较
            a=="123a";//true
            b=="123a";//true
            ```
6. ===
    1. 类型不想等，直不想等
    2. NaN!==NaN
    3. 0===-0
7. 比较 >, <, >=, <=  （数字优先）
    1. 对象先转换为原始型
    2. 两个都是字符串，按照字母表顺序比较
    3. 一个不是字符串，则转换为数字比较
    4. 如果其中一个是NaN，那么比较操作符总是返回false
8. in
    1. 左操作数是一个字符串，否则要转换为字符串，右操作数是一个对象
8. instanceof
    1. 左操作数是一个对象，右操作数是标识对象的类，即左操作数是右操作数的实例
9. 逻辑表达式与或非
10. 逗号运算符
    1. 挨个计算，默认返回最后一个；但是alert只接收第一个参数
  

###  显示类型转换
1. Number 强制转换为数字
    1. Number的toString(radix)方法根据传入的值来转换为radix进制；
    2. toFixed，toExponential，toPrecision都是转换为字符串；
    3. Number()传入一个值，转换为10进制数字，非数字转为NaN；
2. parseInt, parseFloat 灵活，除非传入以非数字开头的（例如parseInt(".1"),parseInt("$123")），否则都可以转换，而且可以接收第二个参数表示进制；
3. String 强制转换为字符串


###  对象转换为原始值(所有对象都继承了toString方法和valueOf方法)
1. 对象转换为布尔值：都为true，包括包装对象；
    1. 例如 new Boolean(false)也是true, new Boolean(new Boolean(false))
2. 对象转换为字符串：先调用toString(), 返回不是原始值，再调用valueOf()
3. 对象转换为数字：先调用valueOf() 返回不是原始值，再调用toString()
    1. 数组的valueOf()返回一个对象，因此数组转为数字调用toString()
        1. []    =>    [].toString=""   => Number("")=0
        2. [1]    =>    [1].toString="1"   =>   Number("1")=1
        3. [1,2]    =>    [1,2].toString="1,2"   =>    Number("1,2")=NaN
    2. 对象转为原始型：
        1. 一般对象：先调用valueOf() 返回不是原始值，再调用toString()，不会刻意转为数字或者字符串
        2. 日期对象：使用到字符串的转换模式，即先调用toString(), 返回不是原始值，再调用valueOf()
    3. "+"及"=="，"<"，"!="：并非刻意去转换为字符串或者数字，而是转换为原始值，除了日期类之外，都是调用valueOf() 方法；
    4. "-"会转换为数字
    